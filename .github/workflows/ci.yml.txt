name: ASP.NET MVC Build and Test (with .NET Framework)

on:
  push:
    branches:
      - master  # Trigger this workflow when code is pushed to the master branch.
  pull_request:
    branches:
      - master  # Trigger this workflow when a pull request is created for master.

jobs:
  build:
    runs-on: windows-latest  # Use a Windows environment to run the build.

    steps:
    - name: Checkout code
      uses: actions/checkout@v2  # Checks out the code from the repository.

    - name: Set up .NET Framework
      uses: microsoft/setup-msbuild@v1  # Sets up MSBuild environment for .NET Framework projects.
      with:
        msbuild-version: 'latest'  # You can specify the MSBuild version here.

    - name: Install NuGet
      run: |
        Invoke-WebRequest -Uri https://dist.nuget.org/win-x86-commandline/latest/nuget.exe -OutFile nuget.exe
        ./nuget.exe restore OrderProcessingApp.sln  # Restore NuGet packages for your solution file.

    - name: Build the application
      run: |
        msbuild OrderProcessingApp.sln /p:Configuration=Release  # Build the solution using MSBuild.

    - name: Run tests
      run: |
        # Run unit tests using the MSTest framework (or your preferred testing framework).
        vstest.console.exe "path\to\your\test\project\bin\Release\yourtestproject.dll"
